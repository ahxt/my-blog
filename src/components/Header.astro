---
import type { HTMLAttributes } from "astro/types";
import { kUrlBase, kSiteLogo } from "$consts";

import { ThemeToggle } from "@myriaddreamin/tylant-theme-toggle";

interface Props {
  articleId?: string;
}

interface HeaderLinkProps extends HTMLAttributes<"a"> {
  href: string;
}

const { articleId } = Astro.props;

// HeaderLink functionality
function createHeaderLink(href: string, children: string) {
  const pathname = Astro.url.pathname.replace(import.meta.env.BASE_URL, "");
  const subpath = pathname.match(/[^\/]+/g);
  const isActive = href === pathname || href === "/" + (subpath?.[0] || "");
  return { href, children, isActive };
}

const homeLink = createHeaderLink(`${kUrlBase}/`, "Home");
const postsLink = createHeaderLink(`${kUrlBase}/article`, "Posts");
---

<header>
  <nav>
    <div class="logo-container">
      <h2 class="logo">
        <a href={`${kUrlBase}/`} class="logo-link">
          <span class="logo-text">{kSiteLogo}</span>
        </a>
      </h2>
    </div>
    <div class="internal-links">
      <a href={homeLink.href} class:list={["nav-link", { active: homeLink.isActive }]}>
        <span class="nav-text">{homeLink.children}</span>
        <span class="nav-indicator"></span>
      </a>
      <a href={postsLink.href} class:list={["nav-link", { active: postsLink.isActive }]}>
        <span class="nav-text">{postsLink.children}</span>
        <span class="nav-indicator"></span>
      </a>
    </div>
  </nav>
</header>
